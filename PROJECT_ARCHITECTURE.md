# GitLab MCP é¡¹ç›®æ¶æ„æ€»ç»“

> ğŸ¯ **å®Œæˆç›®æ ‡**: é‡æ–°æ¶æ„æµ‹è¯•æµç¨‹ï¼Œç¬¦åˆå·¥ç¨‹åŒ–è¦æ±‚

## ğŸ—ï¸ æ–°æ¶æ„æ¦‚è§ˆ

### ğŸ“ é¡¹ç›®ç»“æ„

```
gitlab-mcp/
â”œâ”€â”€ src/                           # æºä»£ç 
â”‚   â”œâ”€â”€ gitlab/
â”‚   â”‚   â””â”€â”€ client.ts             # âœ… å·²ä¿®å¤ getMergeRequestChanges
â”‚   â”œâ”€â”€ config/
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ tests/                         # ğŸ†• å·¥ç¨‹åŒ–æµ‹è¯•æ¡†æ¶
â”‚   â”œâ”€â”€ config/                   # æµ‹è¯•é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ test-config.js        # ç»Ÿä¸€é…ç½®ç±»
â”‚   â”‚   â””â”€â”€ env.example           # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”‚   â”œâ”€â”€ integration/              # é›†æˆæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ mr-changes.test.js    # å®Œæ•´é›†æˆæµ‹è¯•
â”‚   â”‚   â””â”€â”€ quick.test.js         # å¿«é€Ÿæµ‹è¯•
â”‚   â”œâ”€â”€ utils/                    # æµ‹è¯•å·¥å…·ç±»
â”‚   â”‚   â”œâ”€â”€ test-logger.js        # æ—¥å¿—è®°å½•å™¨
â”‚   â”‚   â””â”€â”€ test-runner.js        # æµ‹è¯•è¿è¡Œå™¨
â”‚   â”œâ”€â”€ logs/                     # æ—¥å¿—æ–‡ä»¶ç›®å½• (è‡ªåŠ¨ç”Ÿæˆ)
â”‚   â””â”€â”€ README.md                 # æµ‹è¯•æ¡†æ¶æ–‡æ¡£
â”œâ”€â”€ dist/                         # ç¼–è¯‘è¾“å‡º
â”œâ”€â”€ package.json                  # âœ… æ›´æ–°æµ‹è¯•è„šæœ¬
â”œâ”€â”€ TESTING.md                    # æµ‹è¯•æŒ‡å—
â””â”€â”€ PROJECT_ARCHITECTURE.md      # æœ¬æ–‡æ¡£
```

## ğŸ”§ æ ¸å¿ƒæ”¹è¿›

### 1. é…ç½®ç®¡ç†æ ‡å‡†åŒ–
**å‰**: åˆ†æ•£çš„ç¯å¢ƒå˜é‡å¤„ç†
**å**: ç»Ÿä¸€çš„é…ç½®ç®¡ç†ç±»

```javascript
// tests/config/test-config.js
export class TestConfig {
  validate()              // é…ç½®éªŒè¯
  getGitlabConfig()       // GitLab å®¢æˆ·ç«¯é…ç½®
  getLogConfig()          // æ—¥å¿—é…ç½®
}
```

### 2. æ—¥å¿—ç³»ç»Ÿå·¥ç¨‹åŒ–
**å‰**: ç®€å•çš„ console.log
**å**: ç»“æ„åŒ–æ—¥å¿—è®°å½•å™¨

```javascript
// tests/utils/test-logger.js
export class TestLogger {
  info() / success() / error()    // å¤šçº§åˆ«æ—¥å¿—
  separator()                     // æ ¼å¼åŒ–åˆ†éš”ç¬¦
  flush()                         // æ–‡ä»¶æŒä¹…åŒ–
}
```

### 3. æµ‹è¯•è¿è¡Œå™¨æ¨¡å—åŒ–
**å‰**: å†…è”æµ‹è¯•é€»è¾‘
**å**: å¯å¤ç”¨çš„æµ‹è¯•è¿è¡Œå™¨

```javascript
// tests/utils/test-runner.js
export class TestRunner {
  runSingleTest()        // å•ä¸ªæµ‹è¯•æ‰§è¡Œ
  runTestSuite()         // æµ‹è¯•å¥—ä»¶æ‰§è¡Œ
  analyzeChanges()       // ç»“æœåˆ†æ
  displayResults()       // ç»“æœæ±‡æ€»
}
```

### 4. æµ‹è¯•è„šæœ¬æ ‡å‡†åŒ–
**å‰**: 
```json
{
  "test:quick": "node quick-test.js",
  "test:detailed": "node test-mr-changes.js"
}
```

**å**:
```json
{
  "test": "node tests/integration/mr-changes.test.js",
  "test:quick": "node tests/integration/quick.test.js",
  "test:integration": "node tests/integration/mr-changes.test.js",
  "test:logs": "ls -la tests/logs/",
  "test:clean": "rm -rf tests/logs/*",
  "test:help": "node tests/integration/quick.test.js --help"
}
```

## ğŸ¯ ä½¿ç”¨æµç¨‹

### å¼€å‘è€…æ—¥å¸¸æµ‹è¯•
```bash
# 1. ç¯å¢ƒå‡†å¤‡ (ä¸€æ¬¡æ€§)
cp tests/config/env.example .env
# ç¼–è¾‘ .env å¡«å…¥çœŸå®é…ç½®

# 2. å¿«é€ŸéªŒè¯
npm run test:quick

# 3. å®Œæ•´æµ‹è¯•
npm run test
```

### CI/CD é›†æˆ
```yaml
# GitHub Actions / GitLab CI ç¤ºä¾‹
steps:
  - run: npm run build
  - run: npm run test
    env:
      GITLAB_HOST: ${{ secrets.GITLAB_HOST }}
      GITLAB_TOKEN: ${{ secrets.GITLAB_TOKEN }}
```

## ğŸš€ å…³é”®ç‰¹æ€§

### âœ… æ¨¡å—åŒ–è®¾è®¡
- **é…ç½®**: ç»Ÿä¸€ç®¡ç†ï¼Œæ˜“äºç»´æŠ¤
- **æ—¥å¿—**: ç‹¬ç«‹ç»„ä»¶ï¼Œæ”¯æŒå¤šæ ¼å¼
- **è¿è¡Œå™¨**: å¯å¤ç”¨ï¼Œæ”¯æŒæ‰©å±•
- **æµ‹è¯•**: èŒè´£æ¸…æ™°ï¼Œä¾¿äºè°ƒè¯•

### âœ… å·¥ç¨‹åŒ–æ ‡å‡†
- **ç›®å½•ç»“æ„**: ç¬¦åˆ Node.js æœ€ä½³å®è·µ
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„å¼‚å¸¸æ•è·æœºåˆ¶
- **æ—¥å¿—ç®¡ç†**: ç»“æ„åŒ–æ—¥å¿—ï¼Œæ”¯æŒæ–‡ä»¶è¾“å‡º
- **é…ç½®éªŒè¯**: å¯åŠ¨æ—¶éªŒè¯å¿…éœ€é…ç½®

### âœ… å¼€å‘ä½“éªŒ
- **å¿«é€Ÿæµ‹è¯•**: < 5ç§’ è·å¾—åé¦ˆ
- **è¯¦ç»†æ—¥å¿—**: å®Œæ•´çš„æµ‹è¯•è¿‡ç¨‹è®°å½•
- **çµæ´»é…ç½®**: ç¯å¢ƒå˜é‡ + å‘½ä»¤è¡Œå‚æ•°
- **æ¸…æ™°è¾“å‡º**: å½©è‰²æ—¥å¿— + è¿›åº¦æŒ‡ç¤º

### âœ… å¯ç»´æŠ¤æ€§
- **å•ä¸€èŒè´£**: æ¯ä¸ªç±»ä¸“æ³¨ç‰¹å®šåŠŸèƒ½
- **ä¾èµ–æ³¨å…¥**: é…ç½®é€šè¿‡æ„é€ å‡½æ•°ä¼ å…¥
- **æ¥å£ä¸€è‡´**: ç»Ÿä¸€çš„æ–¹æ³•å‘½åè§„èŒƒ
- **æ–‡æ¡£å®Œå–„**: è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### æµ‹è¯•æ‰§è¡Œæ•ˆç‡
- **å¿«é€Ÿæµ‹è¯•**: æ— æ—¥å¿—æ–‡ä»¶å†™å…¥ï¼Œä¸“æ³¨æ ¸å¿ƒéªŒè¯
- **å¹¶è¡Œæ”¯æŒ**: æ¶æ„æ”¯æŒå¤šæµ‹è¯•ç”¨ä¾‹å¹¶è¡Œæ‰§è¡Œ
- **èµ„æºç®¡ç†**: è‡ªåŠ¨æ¸…ç†æ—¥å¿—å’Œä¸´æ—¶æ–‡ä»¶

### å†…å­˜ä½¿ç”¨ä¼˜åŒ–
- **æµå¼å¤„ç†**: å¤§æ–‡ä»¶å˜æ›´åˆ—è¡¨åˆ†å—å¤„ç†
- **åŠæ—¶é‡Šæ”¾**: æµ‹è¯•å®Œæˆåæ¸…ç†å¯¹è±¡å¼•ç”¨
- **ç¼“å†²æ§åˆ¶**: æ—¥å¿—ç¼“å†²åŒºå¤§å°é™åˆ¶

## ğŸ” æµ‹è¯•è¦†ç›–

### åŠŸèƒ½æµ‹è¯•
- âœ… **æ­£å¸¸æµç¨‹**: è·å–MRå˜æ›´ä¿¡æ¯
- âœ… **è¾¹ç•Œæƒ…å†µ**: ç©ºå˜æ›´ã€æ— æƒé™ç­‰
- âœ… **é”™è¯¯å¤„ç†**: ç½‘ç»œå¼‚å¸¸ã€APIé”™è¯¯

### å…¼å®¹æ€§æµ‹è¯•
- âœ… **GitLabç‰ˆæœ¬**: æ”¯æŒä¸åŒç‰ˆæœ¬API
- âœ… **æ•°æ®æ ¼å¼**: å¤„ç†å„ç§è¿”å›ç»“æ„
- âœ… **ç½‘ç»œç¯å¢ƒ**: è¶…æ—¶ã€é‡è¯•æœºåˆ¶

## ğŸ‰ æˆæœå±•ç¤º

### ä¿®å¤æ•ˆæœå¯¹æ¯”

**ä¿®å¤å‰**:
```bash
âŒ Error: Cannot read properties of undefined (reading 'map')
```

**ä¿®å¤å**:
```bash
ğŸš€ å¿«é€Ÿæµ‹è¯•: gdesign/meta MR#11242
==================================================
âœ… GitLab å®¢æˆ·ç«¯å·²åˆ›å»º
ğŸ“‹ è·å–é¡¹ç›®: gdesign/meta
âœ… é¡¹ç›® ID: 12345
ğŸ” è·å– MR å˜æ›´: 11242

ğŸ“Š ç»“æœåˆ†æ:
- æ•°æ®ç±»å‹: object
- æ˜¯å¦æœ‰ changes: true
- å˜æ›´æ–‡ä»¶æ•°: 5
- å‰3ä¸ªæ–‡ä»¶:
  1. src/components/Button.tsx
  2. src/styles/theme.css
  3. README.md

ğŸ‰ æµ‹è¯•æˆåŠŸå®Œæˆ!
```

### å·¥ç¨‹åŒ–ç¨‹åº¦æå‡

| ç»´åº¦ | ä¿®å¤å‰ | ä¿®å¤å | æå‡ |
|------|--------|--------|------|
| **ä»£ç ç»„ç»‡** | æ•£ä¹±è„šæœ¬ | æ¨¡å—åŒ–æ¶æ„ | â­â­â­â­â­ |
| **é”™è¯¯å¤„ç†** | åŸºç¡€æ•è· | å®Œå–„æœºåˆ¶ | â­â­â­â­â­ |
| **æ—¥å¿—ç®¡ç†** | consoleè¾“å‡º | ç»“æ„åŒ–æ—¥å¿— | â­â­â­â­â­ |
| **é…ç½®ç®¡ç†** | ç¡¬ç¼–ç  | ç¯å¢ƒå˜é‡ | â­â­â­â­â­ |
| **å¯ç»´æŠ¤æ€§** | ä½ | é«˜ | â­â­â­â­â­ |
| **æ‰©å±•æ€§** | å·® | ä¼˜ç§€ | â­â­â­â­â­ |

## ğŸ”® æœªæ¥æ‰©å±•

### æµ‹è¯•æ¡†æ¶å¢å¼º
- [ ] å•å…ƒæµ‹è¯•é›†æˆ (Jest/Mocha)
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•
- [ ] è‡ªåŠ¨åŒ–å›å½’æµ‹è¯•
- [ ] æµ‹è¯•æŠ¥å‘Šç”Ÿæˆ

### åŠŸèƒ½æ‰©å±•
- [ ] å¤šé¡¹ç›®æ‰¹é‡æµ‹è¯•
- [ ] æµ‹è¯•æ•°æ®æ¨¡æ‹Ÿ
- [ ] API Mock æœåŠ¡
- [ ] ç›‘æ§å‘Šè­¦é›†æˆ

---

**âœ¨ æ€»ç»“**: é€šè¿‡ç³»ç»Ÿæ€§çš„æ¶æ„é‡æ„ï¼Œé¡¹ç›®æµ‹è¯•æµç¨‹å·²å®Œå…¨ç¬¦åˆå·¥ç¨‹åŒ–è¦æ±‚ï¼Œå…·å¤‡è‰¯å¥½çš„å¯ç»´æŠ¤æ€§ã€æ‰©å±•æ€§å’Œå¼€å‘ä½“éªŒã€‚ 